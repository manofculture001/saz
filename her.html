<!doctype html>
<html lang="ne">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>For You üåπ</title>
<style>
:root{
  --rose:#ff4f7a;
  --pink:#ffd6e3;
  --bg1:#fff5f8;
  --bg2:#fdeef4;
}

html,body{
  margin:0;
  height:100%;
  font-family:Inter,system-ui;
  overflow:hidden;
}

body{
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  display:flex;
  align-items:center;
  justify-content:center;
}

.stage{
  width:min(1200px,98vw);
  height:min(780px,95vh);
  background:white;
  border-radius:24px;
  position:relative;
  overflow:hidden;
  box-shadow:0 20px 50px rgba(0,0,0,0.1);
}

.stage.glow{
  box-shadow:0 20px 80px rgba(255,79,122,0.35);
}

.loading{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:white;
  z-index:100;
}

.spinner{
  width:40px;height:40px;border:4px solid #eee;border-top:4px solid var(--rose);
  border-radius:50%;animation:spin 1s linear infinite;
}

@keyframes spin{100%{transform:rotate(360deg)}}

.countdown{position:absolute;inset:0;display:grid;place-items:center;background:rgba(255,255,255,0.9);z-index:10;}
.count{font-size:clamp(60px,12vw,140px);font-weight:800;color:var(--rose);animation:pop 1.2s ease forwards;}
@keyframes pop{0%{opacity:0;transform:scale(0.8)}40%{opacity:1;transform:scale(1.2)}100%{opacity:0;transform:scale(1.3)}}

.actor{
  position:absolute;
  bottom:60px;
  left:-250px; /* moved more to the left */
  width:120px;
  z-index:50;
}
.actor.walk{animation:walk 7s ease forwards;}
@keyframes walk{100%{transform:translateX(35vw)}}

.bouquet{
  position:absolute;
  left:50%;
  top:45%; /* original position */
  transform:translate(-50%, -50%);
  width:min(580px,90vw);
  height:min(580px,90vw);
  z-index:20;
}

.flower{
  position:relative;
  width:100%;
  height:100%;
}

/* Petal styles with placeholder and proper image fit */
.petal{
  position:absolute;
  cursor:pointer;
  box-shadow:0 6px 20px rgba(0,0,0,0.25);
  transition:all 0.3s ease;
  border:2px solid var(--rose);
  border-radius:20px;
  overflow:hidden;
  transform-origin:50% 50%;
  background:#ffe6f0; /* placeholder color */
  display:flex;
  align-items:center;
  justify-content:center;
}

.petal img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

.petal.active{
  width:450px !important;
  height:360px !important;
  left:50% !important;
  top:50% !important;
  transform:translate(-50%,-50%) scale(1) !important;
  z-index:100;
  box-shadow:0 40px 100px rgba(0,0,0,0.5);
  clip-path:unset !important;
  animation:zoomIn 0.5s ease forwards;
}

@keyframes zoomIn {
  0%{transform:translate(-50%, -50%) scale(0);}
  60%{transform:translate(-50%, -50%) scale(1.1);}
  100%{transform:translate(-50%, -50%) scale(1);}
}

.close-btn{
  position:absolute;top:10px;right:10px;background:rgba(255,255,255,0.98);color:var(--rose);
  border:2px solid var(--rose);border-radius:50%;width:30px;height:30px;font-size:18px;
  font-weight:800;display:none;cursor:pointer;backdrop-filter:blur(20px);transition:all 0.3s ease;
}
.close-btn:hover{background:var(--rose);color:white;transform:scale(1.15);}
.petal.active .close-btn{display:block;}

.text{position:absolute;bottom:40px;width:100%;text-align:center;font-size:26px;font-weight:700;opacity:0;transition:opacity 1.5s ease;line-height:1.4; z-index:30;}
.text.show{opacity:1;}

.restart{position:absolute;bottom:25px;right:30px;background:var(--rose);color:white;border:none;padding:14px 28px;border-radius:28px;cursor:pointer;opacity:0;transition:opacity 0.5s ease;font-weight:600;font-size:17px; z-index:30;}
.restart.show{opacity:1;}
.restart:hover{background:#e9456a;transform:translateY(-3px);}

/* Heart-shaped floating petals */
.heart{
  position:absolute;
  width:10px; height:10px;
  background:var(--rose);
  clip-path: polygon(50% 0%, 61% 11%, 75% 12%, 82% 25%, 88% 38%, 75% 55%, 50% 80%, 25% 55%, 12% 38%, 18% 25%, 25% 12%, 39% 11%);
  opacity:0.8;
}
</style>
</head>
<body>
<div class="stage" id="stage">
  <div class="loading" id="loading"><div class="spinner"></div></div>
  <div class="countdown" id="countdown"><div id="countHolder"></div></div>

  <div class="actor" id="actor">
    <svg viewBox="0 0 120 220">
      <circle cx="60" cy="30" r="18" fill="#fff" stroke="#111" stroke-width="4"/>
      <line x1="60" y1="48" x2="60" y2="120" stroke="#111" stroke-width="6"/>
      <line x1="60" y1="70" x2="10" y2="100" stroke="#111" stroke-width="6"/>
      <line x1="60" y1="70" x2="110" y2="100" stroke="#111" stroke-width="6"/>
      <line x1="60" y1="120" x2="40" y2="180" stroke="#111" stroke-width="6"/>
      <line x1="60" y1="120" x2="80" y2="180" stroke="#111" stroke-width="6"/>
    </svg>
  </div>

  <div class="bouquet" id="bouquet">
    <div class="flower" id="flower"></div>
  </div>

  <div class="text" id="text">‡§§‡§ø‡§Æ‡•Ä‡§≤‡•á ‡§®‡§™‡§æ‡§è‡§ï‡•ã ‡§∞‡•ã‡§ú‡§ï‡•ã ‡§∏‡§ü‡•ç‡§ü‡§æ ‚Äî ‡§§‡§ø‡§Æ‡•Ä‡§≤‡•á ‡§≠‡§∞‡§ø‡§è‡§ï‡•ã ‡§Ø‡•ã ‡§´‡•Ç‡§≤ üåπ</div>
  <button class="restart" id="restart">Restart</button>
</div>

<script>
const photos=[
  "photos/1.jpg","photos/2.jpg","photos/3.jpg",
  "photos/4.jpg","photos/5.jpg","photos/6.jpg"
];

const loading=document.getElementById("loading");
const countdown=document.getElementById("countdown");
const countHolder=document.getElementById("countHolder");
const actor=document.getElementById("actor");
const bouquet=document.getElementById("bouquet");
const flower=document.getElementById("flower");
const text=document.getElementById("text");
const restart=document.getElementById("restart");

function sleep(ms){return new Promise(r=>setTimeout(r,ms));}

async function startCountdown(){
  for(let i=3;i>=1;i--){
    const el=document.createElement("div");
    el.className="count";
    el.textContent=i;
    countHolder.innerHTML="";
    countHolder.appendChild(el);
    await sleep(1200);
  }
  countdown.style.display="none";
  startScene();
}

function startScene(){
  actor.classList.add("walk");
  setTimeout(()=>{
    createBouquet();
    text.classList.add("show");
    restart.classList.add("show");
    createFloatingHearts();
  },7000);
}

// ---- Bouquet creation with placeholders ----
function createBouquet(){
  flower.innerHTML="";
  const centerX = flower.offsetWidth / 2;
  const centerY = flower.offsetHeight / 2;

  let usedPhotos=[];
  function getPhoto(){
    for(let i=0;i<photos.length;i++){
      if(!usedPhotos.includes(i)){
        usedPhotos.push(i); return photos[i];
      }
    }
    return photos[Math.floor(Math.random()*photos.length)];
  }

  function createPetal(x, y, size, imgSrc, angle=0){
    const petal=document.createElement("div");
    petal.className="petal";
    petal.style.width=size+"px";
    petal.style.height=size+"px";
    petal.style.left=x+"px";
    petal.style.top=y+"px";
    petal.style.transform=`translate(-50%, -50%) rotate(${angle}deg)`;

    const img=document.createElement("img");
    img.src=imgSrc;
    petal.appendChild(img);

    addClickHandler(petal);
    flower.appendChild(petal);
  }

  // Center petal
  createPetal(centerX, centerY, 100, photos[photos.length-1]);

  // Surrounding petals
  const layers=[
    {count:8, radius:120, size:80},
    {count:12, radius:200, size:70}
  ];

  layers.forEach(layer=>{
    const angleStep=(2*Math.PI)/layer.count;
    for(let i=0;i<layer.count;i++){
      const angle=i*angleStep;
      const x=centerX + Math.cos(angle)*layer.radius;
      const y=centerY + Math.sin(angle)*layer.radius;
      createPetal(x, y, layer.size, getPhoto(), angle*180/Math.PI);
    }
  });
}

// ---- Click to zoom bouquet petal ----
function addClickHandler(petal){
  const close=document.createElement("button");
  close.className="close-btn";
  close.textContent="√ó";
  close.onclick=e=>{
    e.stopPropagation();
    flower.classList.remove("dim");
    document.querySelectorAll(".petal").forEach(p=>p.classList.remove("active"));
  };
  petal.appendChild(close);

  petal.onclick=e=>{
    e.stopPropagation();
    flower.classList.add("dim");
    document.querySelectorAll(".petal").forEach(p=>p.classList.remove("active"));
    petal.classList.add("active");
  };
}

// ---- Floating heart shapes ----
function createFloatingHearts(){
  for(let i=0;i<40;i++){
    const heart=document.createElement("div");
    heart.className="heart";
    heart.style.left=Math.random()*100+"%";
    heart.style.top=-20+"px";
    heart.style.width=5+Math.random()*10+"px";
    heart.style.height=5+Math.random()*10+"px";
    document.body.appendChild(heart);
    let speed=0.5+Math.random()*1;
    function fall(){
      let top=parseFloat(heart.style.top);
      if(top>window.innerHeight){
        heart.style.top=-20+"px";
        heart.style.left=Math.random()*100+"%";
      } else {
        heart.style.top=(top+speed)+"px";
        heart.style.left=parseFloat(heart.style.left)+Math.sin(top/50)*0.3+"%";
      }
      requestAnimationFrame(fall);
    }
    fall();
  }
}

// ---- Restart button ----
restart.onclick=()=>{
  actor.classList.remove("walk");
  flower.innerHTML="";
  document.querySelectorAll(".heart").forEach(h=>h.remove());
  countdown.style.display="grid";
  startCountdown();
};

// ---- Initial loading ----
setTimeout(()=>{loading.style.display="none";startCountdown();},1500);
</script>
</body>
</html>
